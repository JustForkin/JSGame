 JSGame ={version:"0.1" };uid = (function(){var id = 0;return function(){if (arguments[0] === 0) id = 0;return id++;} })();JSGame.Surface = function(x,y,w,h,customClass){this.x = x;this.y = y;this.w = w;this.h = h;this.z = 0;this.rotation = 0;this.styles ={margin:0,padding:0,background:'none',width:this.w+'px',height:this.h+'px',backgroundSize:'100% 100%' };this.transform();this.id = uid();if (customClass !== undefined){this.domString = '<div id="jsg'+this.id+'" class="'+customClass+'"></div>';} else{this.domString = '<div id="jsg'+this.id+'"></div>';} };JSGame.Surface.prototype.update = function(){$('#jsg'+this.id).css(this.styles);};JSGame.Surface.prototype.bindToStage = function(){$('#game-stage').append(this.domString);};JSGame.Surface.prototype.setPosition = function(x,y,z){this.x = x;this.y = y;if (z !== undefined){this.z = z;this.styles.zIndex = z;} };JSGame.Surface.prototype.setRotation = function(degree){this.rotation = degree;this.transform();};JSGame.Surface.prototype.translate = function(dx,dy,dz,da){this.x += dx;this.y += dy;if (dz !== undefined){this.z += dz;this.styles.zIndex = this.z;};if (da !== undefined){this.rotation += da;};this.transform();};JSGame.Surface.prototype.colorFill = function(r,g,b,a){if (a !== undefined){this.styles['background-color'] = 'rgba('+r+','+g+','+b+','+a+')';} else{this.styles['background-color'] = 'rgba('+r+','+g+','+b+')';} };JSGame.Surface.prototype.round = function(p){this.styles['border-radius'] = p+'%' };JSGame.Surface.prototype.image = function(image){this.styles['background-image'] = 'url('+image+')';};JSGame.Surface.prototype.transform = function(){this.styles.transform = 'translate('+this.x+'px,'+this.y+'px) rotate('+this.rotation+'deg)';};JSGame.keyStates ={};JSGame.key ={};JSGame.key.left = 37;JSGame.key.up = 38;JSGame.key.right = 39;JSGame.key.down = 40;JSGame.key.insert = 45;JSGame.key._delete = 46;JSGame.key._0 = 48;JSGame.key._1 = 59;JSGame.key._2 = 50;JSGame.key._3 = 51;JSGame.key._4 = 52;JSGame.key._5 = 53;JSGame.key._6 = 54;JSGame.key._7 = 55;JSGame.key._8 = 56;JSGame.key._9 = 57;JSGame.key.b = 66;JSGame.key.c = 67;JSGame.key.d = 68;JSGame.key.e = 69;JSGame.key.f = 70;JSGame.key.g = 71;JSGame.key.h = 72;JSGame.key.i = 73;JSGame.key.j = 74;JSGame.key.k = 75;JSGame.key.l = 76;JSGame.key.m = 77;JSGame.key.n = 78;JSGame.key.o = 79;JSGame.key.p = 80;JSGame.key.q = 81;JSGame.key.r = 82;JSGame.key.s = 83;JSGame.key.t = 84;JSGame.key.u = 85;JSGame.key.v = 86;JSGame.key.w = 87;JSGame.key.x = 88;JSGame.key.y = 89;JSGame.key.z = 90;JSGame.initKeyboard = function(){var wrapper = this;$(window).keydown(function(e){JSGame.keyStates[e.which] = true;});$(window).keyup(function(e){JSGame.keyStates[e.which] = false;});};JSGame.keyDown = function(id){if (JSGame.keyStates[id] !== undefined){return JSGame.keyStates[id];} else{return false;} };JSGame.Rect = function(x,y,w,h){this.x = x;this.y = y;this.w = w;this.h = h;this.left = x;this.top = y;this.right = x+w;this.bottom = y+w;};JSGame.Rect.prototype.intersects = function(r2){return !(r2.left > this.right || r2.right < this.left || r2.top > this.bottom || r2.bottom < this.top);};JSGame.game = function(o){JSGame.initKeyboard();$(document).ready(function(){var defaults ={fps:60,fullscreen:false,width:800,height:600,container:'body' };var g = new o();var properties = $.extend(defaults,g.options ||{});var containerStyles ={width:properties.width+'px',height:properties.height+'px',overflow:'hidden',position:'relative',zIndex:'0',border:'1px solid black',padding:0,margin:0,'box-sizing':'border-box' };$(properties.container).prepend('<div id="game-stage"></div>');$('#game-stage').css(containerStyles);g.init();setInterval(function(){g.update();g.draw();},(1000/properties.fps));});};